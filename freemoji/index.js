(function(i,e,r,s,d,n,y,v){"use strict";var j=r.findByProps("canUseEmojisEverywhere"),f=[s.instead("canUseEmojisEverywhere",j,()=>!0),s.instead("canUseAnimatedEmojis",j,()=>!0)],{getCustomEmojiById:S}=r.findByStoreName("EmojiStore"),{getGuildId:h}=r.findByStoreName("SelectedGuildStore"),E=/<a?:(\w+):(\d+)>/i;function b(t,a){var M=t.matchAll(/<a?:(\w+):(\d+)>/gi);for(var o of M){var m=S(o[2]);if(m.guildId!=h()||m.animated){var l="webp";m.animated&&(l="gif"),e.storage.hyperlink===!0?t=t.replace(o[0],`[\u2065](https://cdn.discordapp.com/emojis/${o[2]}.${l}?size=${a}&quality=lossless&name=${o[1]})`):t=t.replace(o[0],`https://cdn.discordapp.com/emojis/${o[2]}.${l}?size=${a}&quality=lossless&name=${o[1]}`)}}return{newContent:t.trim()}}function u(t){if(t.content.match(E)&&!(!e.storage.forceMoji&&e.storage.haveNitro)){var{newContent:a}=b(t.content,e.storage.emojiSize);t.content=a,t.invalidEmojis=[]}}var R=r.findByProps("sendMessage","receiveMessage"),w=[s.before("sendMessage",R,t=>u(t[1]))],{FormSection:c,FormRadioRow:z,FormSwitchRow:g}=n.Forms,$={Tiny:16,Small:32,Medium:48,Big:56,Large:64,Huge:96,Jumbo:128},F="https://cdn.discordapp.com/emojis/926602689213767680.webp",B=()=>(y.useProxy(e.storage),React.createElement(d.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(c,{title:"Settings",titleStyleType:"no_border"},React.createElement(g,{label:"Hyperlink emoji",subLabel:"Hyperlinks emoji link to be less distractive",leading:React.createElement(n.Forms.FormIcon,{source:v.getAssetIDByName("ic_link")}),value:e.storage.hyperlink,onValueChange:()=>{e.storage.hyperlink=!e.storage.hyperlink},note:""}),React.createElement(g,{label:"Force Freemoji",subLabel:"Explicitly force Freemoji even if you have nitro (useful for testing)",leading:React.createElement(n.Forms.FormIcon,{source:v.getAssetIDByName("img_nitro_emojis")}),value:e.storage.forceMoji,onValueChange:()=>{e.storage.forceMoji=!e.storage.forceMoji},note:""})),React.createElement(c,{title:"Emoji Size"},Object.entries($).map(([t,a])=>React.createElement(z,{label:t,subLabel:a,selected:e.storage.emojiSize===a,onPress:()=>{e.storage.emojiSize=a}}))),React.createElement(c,{title:"Preview"},React.createElement(d.ReactNative.Image,{source:{uri:`${F}?size=${e.storage.emojiSize}`,width:e.storage.emojiSize,height:e.storage.emojiSize}}))));e.storage.emojiSize??=48,e.storage.hyperlink??=!0,e.storage.haveNitro??=r.findByStoreName("UserStore").getCurrentUser()?.premiumType!==null,e.storage.forceMoji??=!1,typeof e.storage.emojiSize=="string"&&(e.storage.emojiSize=parseInt(e.storage.emojiSize));var k=[...f,...w],I=()=>k.forEach(t=>t());return i.onUnload=I,i.settings=B,i})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets);
